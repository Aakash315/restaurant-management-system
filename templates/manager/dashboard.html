{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4 text-center" style="color: brown;"><u>Manager Dashboard</u></h2>

    <!-- Navigation Links -->
    <div class="mb-4">
        <a href="{% url 'manager_feedback' %}" class="btn btn-outline-primary">View Feedback</a>
        <a href="{% url 'manager_report' %}" class="btn btn-outline-success">Daily Report</a>
        <a href="{% url 'inventory_dashboard' %}" class="btn btn-outline-warning">Inventory</a>
    </div>

    <!-- Tables Overview -->
    <h4 class="text-center" style="color: brown;">Tables Overview</h4>
    <table class="custom-table">
        <thead class="">
            <tr>
                <th>Table Number</th>
                <th>Capacity</th>
                <th>Occupied</th>
                <th>Assigned Waiter</th>
                <th>Last Activity</th>
            </tr>
        </thead>
        <tbody>
            {% for table in tables %}
            <tr class="text-center">
                <td>{{ table.number }}</td>
                <td>{{ table.capacity }}</td>
                <td>
                    {% if table.is_occupied %}
                        <span class="badge bg-danger">Yes</span>
                    {% else %}
                        <span class="badge bg-success">No</span>
                    {% endif %}
                </td>
                <td>
                    {{ table.assigned_waiter.user.username|default:"-" }}
                </td>
                <td>{{ table.last_activity|date:"Y-m-d H:i A" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center">No tables found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Recent Orders -->
    <h4 class="text-center mt-5 mb-3" style="color: brown;">Recent Orders</h4>
    <table class="custom-table">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Table</th>
                <th>Customer</th>
                <th>Waiter</th>
                <th>Status</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr class="text-center">
                <td>#{{ order.id }}</td>
                <td>{{ order.table.number }}</td>
                <td>{{ order.customer.name|title }}</td>
                <td>{{ order.waiter.user.username|default:"-" }}</td>
                <td><span class="badge bg-info text-dark">{{ order.status }}</span></td>
                <td>{{ order.created_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center">No recent orders.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
